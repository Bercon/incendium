<html>Click<canvas id="c"></canvas><div id="B" style="position:fixed;cursor:none;left:0;width:100vw;height:100vh;top:40vh;color:#fff;font-weight:bold;font-size:10vh;font-family:sans-serif;text-align:center;letter-spacing:5vh">INCENDIUM<script>onclick=d=>{onclick=0;navigator.gpu.requestAdapter().then(d=>d.requestDevice({requiredLimits:{maxStorageBufferBindingSize:y=256*256*256*16,maxBufferSize:y},}).then(device=>{c.width=1920;c.height=1080;c.style=`position:fixed;cursor:none;left:0;width:100vw;height:100vh;top:0`;x=c.getContext(`webgpu`);x.configure({device,format:`rgba8unorm`,usage:24});u=device.createBuffer({size:8,usage:72});b=[];for(i=0;i<9;i++)b.push(device.createBuffer({size:y,usage:i?132:9}));o=i=0;layout=device.createBindGroupLayout({entries:[{binding:i++,visibility:4,buffer:{type:`storage`}},{binding:i++,visibility:4,buffer:{type:`storage`}},{binding:i++,visibility:4,buffer:{type:`storage`}},{binding:i++,visibility:4,buffer:{type:`storage`}},{binding:i++,visibility:4,buffer:{type:`storage`}},{binding:i++,visibility:4,buffer:{type:`storage`}},{binding:i++,visibility:4,buffer:{type:`storage`}},{binding:i++,visibility:4,buffer:{type:`storage`}},{binding:i++,visibility:4,buffer:{}},{binding:i++,visibility:4,storageTexture:{format:`rgba8unorm`}}]});A=`naaanaaaaaaaaaaabaaabaaaaaaaaaaanaaanaaaaaaaaaaaxaaauaaaaaaaaaaananananaaaaaaaaazauaxauaaaaaaaaanaaanaaaaaaaaaaaxaaauaaaaaaaaaaananananaaaaaaaaaxauasauaaaaaaaaanaaanaaaaaaaaaaaxaaauaaaaaaaaaaananananaaaaaaaaaxa}axazaaaaaaaaanaaanaaaaaaaaaaaxaaauaaaaaaaaaaamamamamaaaaaaaaaya|a}|za|zyanamanaaanaaaaaaaaaaabaaabaaaaaaaaaaanaaauauaaaaaaaaaaaaavaxavaaasaaauaaananaaaaaaaaaaaaaaaaaaaaaaaaanaaauauaaaaaaaaaaaaavaxazaaasaaauaaananaaaaaaaaaaaaaaaaaqaaapaaaqaaaxaxaaaaaaaaaqsuxzxuqsauaxasauaaananaaaaaaaaaaaaaaaaaqaaapaaaqaaaxaxaaaaaaaaaqsuxzxuqsauaxasauaaananaaaaaaaaaaaaaaaaaaaaaaaaanaaanaaaaaaaaaaabaaabaaaaaaaaaaanuquzuqunuquzuqunvsvzvsvnvsvzvsvnuquxuqunuquxuqupusuyusupusuyusunuquzuqunuquzuqunvsvzvsvnvsvzvsvnuquxuqunuquxuqupusuyusupusuyusunuquzuqunuquzuqunvsvzvsvnvsvzvsvnuquxuqunuquxuqupusuyusupusuyusunuquzuqunuquzuqunvsvzvsvnvsvzvsvnuquxuqunuquxuqupusuyusupusuyusunuruxurunuruxurunuruzurunuruytqtlspsxspslspsxspsksnswsnsknswxwsnnuruxurunuruxurunuruzurunuruytqtlspsxspslspsxspsksnswsnsknswxwsnnaaanaaaaaaaaaaabaaabbabanalajalanalajaianbninininiqlniqlninbnsqinsqinsqinsqinnlsnnlsnb`.split("").map(d=>d.charCodeAt()-97).join(`,`);p=[`@compute@workgroup_size(4,4,4)fn n(@builtin(global_invocation_id)g:vec3u){var k=x(256,g);var b=vec3i(g);C[k]=(V[z(256,b+vec3(1,0,0))].r*select(1.,-1.,g.r==255)-V[z(256,b-vec3(1,0,0))].r*select(1.,-1.,g.r==0)+V[z(256,b+vec3(0,1,0))].g*select(1.,-1.,g.g==255)-V[z(256,b-vec3(0,1,0))].g*select(1.,-1.,g.g==0)+V[z(256,b+vec3(0,0,1))].b*select(1.,-1.,g.b==255)-V[z(256,b-vec3(0,0,1))].b*select(1.,-1.,g.b==0))/2*256;}`,`@compute@workgroup_size(4,4,4)fn n(@builtin(global_invocation_id)g:vec3u){var k=x(256,g);var b=vec3i(g);V[k]-=vec4(A[z(256,b+vec3(1,0,0))]-A[z(256,b-vec3(1,0,0))],A[z(256,b+vec3(0,1,0))]-A[z(256,b-vec3(0,1,0))],A[z(256,b+vec3(0,0,1))]-A[z(256,b-vec3(0,0,1))],0)/2*256;}`,`@compute@workgroup_size(8,8)fn n(@builtin(global_invocation_id)g:vec3u){var b=vec3i(g);var k=vec3(b.r,255,b.g);var d=vec3(0,-1,0);if(u.t>21.4){k=vec3(b.r,0,b.g);d=vec3(0,1,0);}if(u.t>37.4){k=vec3(b.r,b.g,255);d=vec3(0,0,-1);}var a=smoothstep(0,.5,abs(u.t-21.4))*smoothstep(0,.5,abs(u.t-37.4));var c=vec3(1.5)*a;for(var i=0;i<256;i++){var k=x(256,vec3u(k+d*i));var t=B[k];var s=F[k];G[k]=vec4(s.rgb*(c+vec3(.04+.5-.5*a)+mix(vec3(.5,.3,.1),mix(vec3(1,.6,.3),vec3(.89,.91,1),clamp((t-2)/4,0,1)),clamp((t-1)/2,0,1))*max(0,t-1)*3),s.a);c*=exp(-(1-s.rgb)*s.a*200/256);}}`,`@compute@workgroup_size(8,8)fn n(@builtin(global_invocation_id)g:vec3u){var b=vec2f(g.rg);var r=D(vec3(vec2f(g.rg),u.t));var c=(b+r.rg-.5*vec2f(1920,1080))/1920;var o=smoothstep(32,36,u.t);var t=max(0,u.t-32)*o;var a=2.8-.8*abs(cos(t*.1));var p=vec3(sin(t*.3)*a,cos(t*.3)*a,sin(t*.1)-.2*o);var z=normalize(-p);var x=normalize(vec3(z.g,-z.r,0));var y=cross(z,x);var d=z+c.r*x+c.g*y;p=mix(p+x*c.r*2+y*c.g*2+y*.4375,p,o);d=normalize(mix(z,d,o));x=(-1-p)/d;y=(1-p)/d;z=min(x,y);x=max(x,y);t=max(z.r,max(z.g,z.b));o=min(x.r,min(x.g,x.b));x=vec3(0);if(t<=o){a=1;t=.008*r.b+max(0,t);while(t<o){var s=q(&G,.5+.5*(p+d*t+1)*256);s.a*=.008*200;t+=.008;a*=exp(-s.a);x+=a*s.rgb*s.a;}}E[g.r+g.g*1920]=vec4(x,1);}`];for(i=0;i<4;i++){a=[`EGHG`[i],`GHGH`[i],i%2?1:1920,i%2?1920:1,i%2?1080:1920];d=`@compute@workgroup_size(60)fn n(@builtin(global_invocation_id)g:vec3u){var b=vec4(0.);var j=160;var o=i32(g.r)*X;for(var i=0;i<j;i++){b+=Z[o+Y*i];}for(var i=0;i<Q;i++){var r=i+160;var l=i-160-1;if(r<Q){b+=Z[o+Y*r];j++;}if(l>=0){b-=Z[o+Y*l];j--;}W[o+Y*i]=b/f32(j);}}`;for(k=0;k<5;k++)d=d.replaceAll(`ZWXYQ`[k],a[k]);p.push(d)}p.push(`@compute@workgroup_size(8,8)fn n(@builtin(global_invocation_id)g:vec3u){var b=pow(E[g.r+g.g*1920]+pow(H[g.r+g.g*1920],vec4(1.5))*.15,vec4(.55));b=b*1.5-.5*dot(b,vec4(.21,.71,.07,.0))+D(vec3(vec2f(g.rg),u.t)).r/255;b.a=1;textureStore(T,g.rg,b);}`,`@compute@workgroup_size(4,4,4)fn n(@builtin(global_invocation_id)g:vec3u){var k=x(256,g);var p=vec3f(g)+.5-u.d*V[k].rgb*256;var s=q(&F,p);var v=q(&V,p);var w=vec3f(g)/128-1;var t=min(v.a,u.d*.8);s.a*=exp(-u.d*select(.8,1.4,u.t>120));v=vec4(v.rgb*exp(-u.d*.01),v.a-t);var f=y(&B,p)*exp(-u.d*.5)+t*12;var a=u.t*6;s=e(s,vec4(select(s.rgb,vec3(.3),u.t<149),t*.5));if(u.t<21.4){for(var i=0;i<30;i++){t=max(0,u.t*.1-.1-f32(i)/30);var r=D(vec3(floor(t),9,f32(i)*90));p=vec3(2*r.r-1+sin(t*20+6*r.g)*.1,0,1.1-2.2*fract(t));a=u.d*clamp(-(length(w-p)-.04)/.05,0,1);s=e(s,vec4(vec3(.7),a*10));f-=5*a;}}if((u.t>106.7&&u.t<138)||(u.t>173.3&&u.t<174)){for(var i=0;i<i32(1+(u.t-106.7)/16*6);i++){t=u.t*.5+6*f32(i)/(1+(u.t-80)/6);p=vec3(sin(t),cos(t),sin(t*.5)*.2-.75)*.6;a=u.d*clamp(-(length(w-p)-.1)/.03,0,1);var r=normalize(w-p)*2+f32(i)+w*9;v+=vec4(normalize(w-p)*(.5+(sin(r.r)/2*sin(r.g*1.5)*sin(r.b*2.5)))*30,9+9*sin(u.t*10+f32(i)))*a;}}if((u.t>21.4&&u.t<53.4)||(u.t>149&&u.t<170.7)){for(var i=0;i<8+select(0,4,u.t>100);i++){t=u.t/16*3;var r=D(vec3(floor(t),9,f32(i)*90));a=t*3*sign(r.g-.5)+20*r.r;p=vec3(cos(a),sin(a),sin(a/3)*.5)*(.5+.4*r.b)+(vec3(cos(a),sin(a),0)*cos(a*8+6*r.g)+vec3(0,0,1)*sin(a*8+6*r.g))*.1;p.g*=step(32,u.t);a=u.d*clamp(-(length(w-p)-.08*smoothstep(0,.2,fract(t))-.02*smoothstep(.95,1,fract(t))-.02*step(90,u.t))/.05,0,1);s=e(s,vec4(mix(mix(vec3(.8),vec3(.7,0,0),step(32,u.t)*step(4,f32(i))),.5+.5*cos(floor(t)+f32(i)*9+vec3(0,2,4)),step(90,u.t)),(20-18*step(90,u.t))*a));f-=10*a*sign(100-u.t);v+=vec4(0,0,20*smoothstep(.95,1,fract(t)),4*step(90,u.t))*a;}}if(u.t>139&&u.t<149){v+=vec4(.04,sin(a),cos(a),10)*u.d*clamp(-(length(w+vec3(0,0,.2))-.1)/.03,0,1)*30*(1+sin(u.t*60));}if(u.t>86&&u.t<87){v.b-=u.d*(1-abs(w.r));}if(u.t>58&&u.t<82){t=u.t/16*6-.5;p=1.4*D(vec3(floor(t),9,9))-.7;for(var i=0;i<2;i++){p*=-1;a=u.d*clamp(-(length(w-p)-.2)/.03,0,1)*smoothstep(.95,1,sin(fract(t)*3)*sin(fract(t)*3));f-=20*a;v+=vec4(normalize(-p+D(vec3(floor(t),9,f32(i)))*.2),0)*30*a;s=e(s,vec4(.5+.5*cos(floor(t)+f32(i)*9+vec3(0,2,4)),30*a));}}if((u.t>95&&u.t<101)||(u.t>122&&u.t<128)||(u.t>155&&u.t<165)){v.r+=w.g*u.d*.2;v.g+=-w.r*u.d*.2;}if(u.t>83&&u.t<104&&array(Z)[i32(u.t*6)-32]+array(Z)[i32(u.t*6)-32-1]>0){t=u.t*6-.5;for(var i=0;i<4;i++){p=(1-D(vec3(floor(t),9,f32(i)))*2)*.8;a=u.d*clamp(-(length(w-p)-.2*sin(fract(t)*3)*sin(fract(t)*3))/.03,0,1);var r=normalize(w-p)*2+f32(i)+w*9;v+=vec4(normalize(w-p)*(.5+(sin(r.r)/2*sin(r.g*1.5)*sin(r.b*2.5)))*100,0)*a;s=e(s,vec4(.5+.5*cos(floor(t)+f32(i)*9+vec3(0,2,4)),10*a));}}p=vec3(0,0,1);if(u.t>136&&u.t<170){p=w;}if(u.t>128&&u.t<136){a=.7;a/=length(w.rb)+.001;p=vec3(w.r,0,w.b)*a-w;p/=length(p)+.001;}C[k]=f;E[k]=v+vec4(p,0)*f*u.d*.7;G[k]=s;}`,`@compute@workgroup_size(4,4,4)fn n(@builtin(global_invocation_id)g:vec3u){var k=x(256,g);var q=array(Z);var b=vec2f(0);var t=f32(k)/48000;for(var a=1.;a>.01;a/=2){for(var j=0;j<2;j++){var u=t+f32(j);var m=0.;var r=t*6;for(var a=3.;a<99;a/=.99){m+=sin(u*a)/a;u+=a;}var v=fract(r)+.0001;for(var i=i32(r)-32;v<9&&i>=0;i--){var n=q[i];if(n>0&&i<1013){b.r+=atan(t/20)*sin(sin(t*exp2(f32(n)/12+9.6))*cosh(sin(r+f32(j)))*cosh(t/90)+m)*a/3*exp2(-.01/v-v*1.5-1);}v+=1;}r/=16;v=fract(r)+.0001;for(var i=i32(r);v<9&&i>=0;i--){var n=q[i+1013];if(n>0&&i<66){b.r+=atan(t/20)*sin(sin(t*exp2(f32(n)/12+7.6))*(3-v)*2+m)*a/3*exp2(-.01/v-v*2);}v+=1;}b=b.gr;}t-=.5;b=b.gr+D(vec3(t*10000)).r*(4.-cos(t*.59))*.0005*a;}A[k]=b.r;A[k+256*256*256]=b.g;}`);q=256;for(i=0;i<6;i++){a=[o,o+=q*q*q,q,q/=2];for(j=0;j<2;j++)a[4]=j,[`@compute@workgroup_size(4,4,4)fn n(@builtin(global_invocation_id)g:vec3u){C[W+x(Y,g)]=(C[Z+x(X,g*2)]+C[Z+x(X,g*2+vec3(1,0,0))]+C[Z+x(X,g*2+vec3(1,0,1))]+C[Z+x(X,g*2+vec3(1,1,1))]+C[Z+x(X,g*2+vec3(1,1,0))]+C[Z+x(X,g*2+vec3(0,1,0))]+C[Z+x(X,g*2+vec3(0,0,1))]+C[Z+x(X,g*2+vec3(0,1,1))])/8;}`,`@compute@workgroup_size(4,4,4)fn n(@builtin(global_invocation_id)g:vec3u){var o=vec3(g.r,g.g,g.b*2+(g.r+g.g+g.b+Q)%2);var b=vec3i(o);var k=x(X,o)+Z;A[k]=(A[Z+z(X,b-vec3(1,0,0))]+A[Z+z(X,b+vec3(1,0,0))]+A[Z+z(X,b+vec3(0,1,0))]+A[Z+z(X,b-vec3(0,1,0))]+A[Z+z(X,b-vec3(0,0,1))]+A[Z+z(X,b+vec3(0,0,1))]-C[k]/X/X)/6;}`,`@compute@workgroup_size(4,4,4)fn n(@builtin(global_invocation_id)g:vec3u){var b=A[W+x(Y,g)];A[Z+x(X,g*2+vec3(0,1,0))]=b;A[Z+x(X,g*2+vec3(0,1,1))]=b;A[Z+x(X,g*2+vec3(0,0,1))]=b;A[Z+x(X,g*2+vec3(1,0,1))]=b;A[Z+x(X,g*2+vec3(1,0,0))]=b;A[Z+x(X,g*2+vec3(1,1,0))]=b;A[Z+x(X,g*2+vec3(1,1,1))]=b;A[Z+x(X,g*2)]=b;}`].map(d=>{for(k=0;k<5;k++)d=d.replaceAll(`ZWXYQ`[k],a[k]);p.push(d)})}p=p.map(d=>device.createComputePipeline({layout:device.createPipelineLayout({bindGroupLayouts:[layout]}),compute:{module:device.createShaderModule({code:`@group(0)@binding(9)var T:texture_storage_2d<rgba8unorm,write>;@group(0)@binding(4)var<storage,read_write>E:array<vec4f>;@group(0)@binding(3)var<storage,read_write>V:array<vec4f>;@group(0)@binding(5)var<storage,read_write>F:array<vec4f>;@group(0)@binding(6)var<storage,read_write>G:array<vec4f>;@group(0)@binding(7)var<storage,read_write>H:array<vec4f>;@group(0)@binding(2)var<storage,read_write>C:array<f32>;@group(0)@binding(0)var<storage,read_write>A:array<f32>;@group(0)@binding(1)var<storage,read_write>B:array<f32>;@group(0)@binding(8)var<uniform>u:U;fn x(t:u32,p:vec3u)->u32{return p.r+p.g*t+p.b*t*t;}fn z(t:u32,p:vec3i)->u32{return x(t,vec3u(clamp(p,vec3i(0),vec3i(i32(t)-1))));}fn y(t:ptr<storage,array<f32>,read_write>,p:vec3f)->f32{var b=vec3i(p+.5)-1;var f=fract(p+.5);return mix(mix(mix((*t)[z(256,b)],(*t)[z(256,b+vec3(1,0,0))],f.r),mix((*t)[z(256,b+vec3(0,1,0))],(*t)[z(256,b+vec3(1,1,0))],f.r),f.g),mix(mix((*t)[z(256,b+vec3(0,0,1))],(*t)[z(256,b+vec3(1,0,1))],f.r),mix((*t)[z(256,b+vec3(0,1,1))],(*t)[z(256,b+vec3(1,1,1))],f.r),f.g),f.b);};fn q(t:ptr<storage,array<vec4f>,read_write>,p:vec3f)->vec4f{var b=vec3i(p+.5)-1;var f=fract(p+.5);return mix(mix(mix((*t)[z(256,b)],(*t)[z(256,b+vec3(1,0,0))],f.r),mix((*t)[z(256,b+vec3(0,1,0))],(*t)[z(256,b+vec3(1,1,0))],f.r),f.g),mix(mix((*t)[z(256,b+vec3(0,0,1))],(*t)[z(256,b+vec3(1,0,1))],f.r),mix((*t)[z(256,b+vec3(0,1,1))],(*t)[z(256,b+vec3(1,1,1))],f.r),f.g),f.b);};fn D(p:vec3f)->vec3f{var x=fract(p*vec3(.1031,.1030,.0973));x+=dot(x,x.grb+33.33);return fract((x.rrg+x.grr)*x.bgr);}fn e(t:vec4f,p:vec4f)->vec4f{var b=p.a+t.a;return select(vec4(mix(p.rgb,t.rgb,t.a/b),b),t,b==0);}struct U{d:f32,t:f32}`+d.replaceAll(`Z`,A)})}}));h=[0,64,64,64];for(i=0;i<5;i++){a=64/2**(i+1);h.push(6*i+11,a,a,a)}for(;i>=0;i--){a=64/2**i;h.push(6*i+12,a,a,a/2);h.push(6*i+15,a,a,a/2);h.push(6*i+12,a,a,a/2);h.push(6*i+15,a,a,a/2);i&&h.push(6*i+7,a,a,a)}l=i=1;h.push(i++,64,64,64,i++,32,32,1,i++,1920/8,1080/8,1,i++,1080/60,1,1,i++,1920/60,1,1,i++,1080/60,1,1,i++,1920/60,1,1,i++,1920/8,1080/8,1,i++,64,64,64,i++,64,64,64);o=t=j=0;(f=d=>{k=j;j^=1;a=o&&performance.now()*.001-o;device.queue.writeBuffer(u,0,new Float32Array([a-t,t=a]));q=device.createCommandEncoder();e=q.beginComputePass();i=0;g=device.createBindGroup({layout,entries:[{binding:i++,resource:{buffer:b[1]}},{binding:i++,resource:{buffer:b[j+2]}},{binding:i++,resource:{buffer:b[k+2]}},{binding:i++,resource:{buffer:b[j+4]}},{binding:i++,resource:{buffer:b[k+4]}},{binding:i++,resource:{buffer:b[j+6]}},{binding:i++,resource:{buffer:b[k+6]}},{binding:i++,resource:{buffer:b[8]}},{binding:i++,resource:{buffer:u}},{binding:i++,resource:x.getCurrentTexture().createView()}]});i=l?176:0;do{e.setPipeline(p[h[i++]]);e.setBindGroup(0,g);e.dispatchWorkgroups(h[i++],h[i++],h[i++])}while(i<176)e.end();l&&q.copyBufferToBuffer(b[1],0,b[0],0,y);device.queue.submit([q.finish()]);l&&b[0].mapAsync(1).then(d=>{A=new AudioContext({sampleRate:48000});s=A.createBufferSource();s.buffer=A.createBuffer(2,y=256*256*256,48000);m=new Float32Array(b[0].getMappedRange());for(i=0;i<y;i++)s.buffer.getChannelData(0)[i]=m[i],s.buffer.getChannelData(1)[i]=m[i+y];s.connect(A.destination);s.start();o=performance.now()*.001;t=0});l=0;B.style.opacity=7-t/2;requestAnimationFrame(f)})()}))}</script>